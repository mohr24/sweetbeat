<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_player</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// variable initialization

x_start = x;
y_start = y;

x_vel = 0;
y_vel = 0;

on_ground = false;

x_stick = 0;
y_stick = 0;

grav_accel = 1;
move_speed = 8;

max_speed = min(sprite_width,sprite_height);
jmp_vel = -20;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// stall variables

in_stall = 0;

stall_length = .5 * obj_manager.fpb;  // half beat
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///blast variables

in_blast = 0;

blast_knockback = -10;
blast_length = .125 * obj_manager.fpb;

my_blast = noone;

x_blast_offset = -(sprite_get_width(spr_player)-sprite_get_width(spr_blast))/2;
y_blast_offset = sprite_get_height(spr_player)/2;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// player control

var horizontal_axis;
var vertical_axis;
var jmp_btn;

var deadzone = .5;

// controller check
if (gamepad_is_connected(0))
{
    horizontal_axis = gamepad_axis_value(0, gp_axislh);
    vertical_axis = gamepad_axis_value(0, gp_axislv);
    jmp_btn = gamepad_button_check_pressed(0, gp_face1);
    
    // deadzone checks
    if (abs(horizontal_axis) &lt; deadzone)
        horizontal_axis = 0;
    if (abs(vertical_axis) &lt; deadzone)
        vertical_axis = 0;
}
else // keyboard check
{
    horizontal_axis = keyboard_check(vk_right) - keyboard_check(vk_left);
    vertical_axis = keyboard_check(vk_down) - keyboard_check(vk_up);
    jmp_btn = keyboard_check_pressed(vk_space);
}

// variable updates
x_vel = horizontal_axis * move_speed;
y_vel += grav_accel;
if (on_ground &amp;&amp; jmp_btn)
    y_vel = jmp_vel;
x_stick = clamp(horizontal_axis / deadzone, -1, 1); // -1, 0, or 1
y_stick = clamp(vertical_axis / deadzone, -1, 1);   // division by deadzone to make easy math
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// reset player position on death

if (obj_manager.kill_player)
{
    if (obj_manager.beat_id == 0)
    {
        x = x_start;
        y = y_start;
    }
    else
    {
        x = obj_manager.beat_id.x;
        y = obj_manager.beat_id.y;
    }
    x_vel = 0;
    y_vel = 0;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// stall action

if (obj_manager.cmd_stall){
    in_stall = stall_length;
    show_debug_message('stall');
}
    
if (in_stall &gt; 0)
{
    x_vel /= 2;
    y_vel = 0;
    in_stall -= 1;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// player movement and collision triggering

x_vel = clamp(x_vel, -max_speed, max_speed);
y_vel = clamp(y_vel, -max_speed, max_speed);

if (place_meeting(x + x_vel, y, obj_solid_parent))
{
    while (!place_meeting(x + sign(x_vel), y, obj_solid_parent))
        x += sign(x_vel);
    var wall = instance_place(x + sign(x_vel), y, obj_solid_parent);
    with (wall)
        event_perform(ev_collision, obj_player); // register a collision event (wouldn't happen normally since we stop before it)
    x_vel = 0;
}
else
    x += x_vel;

on_ground = false;
if (place_meeting(x, y + y_vel, obj_solid_parent))
{
    if (y_vel &gt; 0)
        on_ground = true;
    while (!place_meeting(x, y + sign(y_vel), obj_solid_parent))
        y += sign(y_vel);
    var wall = instance_place(x, y + sign(y_vel), obj_solid_parent);
    with (wall)
        event_perform(ev_collision, obj_player); // register a collision event (wouldn't happen normally since we stop before it)
    y_vel = 0;
}
else
    y += y_vel;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///blast action


if (obj_manager.cmd_blast){
    in_blast = blast_length;
    my_blast = instance_create(x+x_blast_offset,y+y_blast_offset,obj_player_blast);
    y_vel = blast_knockback;
    show_debug_message('blast');
}
    
    
    
if (in_blast &gt; 0)
{
    in_blast -= 1;
    my_blast.x=x+x_blast_offset;
    my_blast.y=y+y_blast_offset;
}else if (my_blast != noone)
{
    with(my_blast){
        instance_destroy();
    }
    my_blast = noone;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>32,32</point>
    <point>32,32</point>
  </PhysicsShapePoints>
</object>
